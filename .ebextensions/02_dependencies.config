packages:
  yum:
    git: []
    gcc: []
    gcc-c++: []
    python3-devel: []
    libffi-devel: []
    openssl-devel: []
commands:
  01_pip_upgrade:
    command: "pip3 install --upgrade pip"
  02_install_requirements_detailed: # Novo nome do comando
    command: | # Usa sintaxe de múltiplas linhas para o comando
      #!/bin/bash
      while IFS= read -r line; do
        if [[ -n "$line" && ! "$line" =~ ^\# ]]; then # Ignora linhas vazias ou comentários
          echo "Attempting to install: $line"
          pip3 install --verbose "$line" || { echo "ERROR installing $line. Exiting."; exit 1; }
        fi
      done < requirements.txt
    # Este comando agora tentará instalar cada linha do requirements.txt individualmente.
    # Se uma linha falhar, ele imprimirá um erro e o script sairá, esperamos que o erro específico seja visível.