packages:
  yum:
    git: []
    gcc: []
    gcc-c++: []
    python3-devel: []
    libffi-devel: []
    openssl-devel: []
commands:
  01_pip_upgrade:
    command: "pip3 install --upgrade pip"
  02_clear_pip_cache: # Limpa o cache do pip antes de instalar
    command: "pip3 cache purge"
  03_install_requirements_force_reinstall: # Tenta forçar a reinstalação de tudo
    command: "pip3 install --no-cache-dir --upgrade --force-reinstall -r requirements.txt > /var/log/pip_install_full.log 2>&1 || { echo 'Erro detalhado da instalação do pip. Verifique /var/log/pip_install_full.log para mais detalhes.' >> /var/log/cfn-init.log; exit 1; }"
    # Redireciona para um novo arquivo de log que pode ser incluído nos logs completos do EB
