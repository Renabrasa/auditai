packages:
  yum:
    git: []
    gcc: []
    gcc-c++: []
    python3-devel: []
    libffi-devel: []
    openssl-devel: []
commands:
  01_install_python_dev_tools:
    command: "sudo yum install -y python3-pip" # Garante que pip3 esteja instalado via yum
  02_upgrade_pip_robust:
    command: "pip3 install --upgrade pip setuptools wheel --user" # Instala pip, setuptools e wheel para o usuário atual
  03_clear_pip_cache:
    command: "pip3 cache purge"
  04_install_requirements_force:
    command: "pip3 install --no-cache-dir --force-reinstall -r req.txt >> /opt/elasticbeanstalk/bin/pip_errors.log 2>&1"
    # Este comando agora redireciona para um local mais "padrão" do EB.
    # Usamos '>>' para append caso haja múltiplas execuções e 2>&1 para stderr.
    # O comando principal ainda vai falhar se pip falhar ok.